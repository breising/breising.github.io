<!DOCTYPE HTML>
<html lang="en">

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta charset="utf-8">
    <title>OrthoCure Main</title>
    <link href='https://fonts.googleapis.com/css?family=Slabo+27px' rel='stylesheet' type='text/css'>
    <script src="js/jquery-2.2.0.min.js"></script>
    <script src="bootstrap-3.3.6-dist/js/bootstrap.js"></script>
    <link rel="stylesheet" href="bootstrap-3.3.6-dist/css/bootstrap.css">
    <script src="js/scripts.js"></script>
    <link rel="stylesheet" href="css/main.css">
</head>

<body>
    <nav class="navbar navbar-default">
        <div class="container-fluid image-main">
            <div class="row top navbar-header">
                <div class="col-xs-8 logo">
                    <img class "image" src="css/images/orthocure_symbol.svg" alt="OrthoCure Logo">
                    <h2>Ortho</h2>
                    <h3>Cure<sup>TM</sup></h3>
                    <!--<h3>TM</h3-->
                    <br>
                    <h6>The Secret Behind the Smile</h6>
                </div>
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <!--<a class="navbar-brand" href="#"></a>-->
            </div>
            <div class="row mid">
                <div class="col-xs-4">
                </div>
                <div class="col-xs-8 mid-text">
                    <h1>The Secret Behind the Smile</h1>
                    <p class="subtitle">Invisible, Comfortable...No Compromises</p>
                    <br>
                    <p><a class="btn btn-primary btn-lg" href="#" role="button">Coming Soon!</a></p>
                </div>
            </div>
            <div class="row">
                <div class="col-xs-6" id="space-hold"></div>
                <div class="col-xs-6 model-row" id="container">
                    <h5 id="h5">Click and Drag to Interact</h5>
                </div>
            </div>
            <div class="row bottom"></div>
        </div>
        <!--class="btn btn-primary btn-lg"-->
        <style>
        /*body {
            font-family: Monospace;
            background-color: #F5F5F5;
            margin: 0px;
            overflow: hidden;
        }*/
        
        #container {
            /*background: #0066cc;
            /* For browsers that do not support gradients */
            /*background: -webkit-linear-gradient(#0066cc, white);
            /* For Safari 5.1 to 6.0 */
            /*background: -o-linear-gradient(#0066cc, white);
            /* For Opera 11.1 to 12.0 */
            /*background: -moz-linear-gradient(#0066cc, white);
            /* For Firefox 3.6 to 15 */
            /*background: linear-gradient(#0066cc, white);
            /* Standard syntax */
            display: block;
            position: relative;
            z-index: 1;
            /*justify-content: flex-end;*/
            opacity: 1;
        }
        </style>
        <script src="js/three.min.js"></script>
        <script src="js/STLLoader.js"></script>
        <script src="js/THREEx.WindowResize.js"></script>
        <script src="js/OrbitControls.js"></script>
        <script src="js/OrbitAndPanControls.js"></script>
        <script src="js/stats.min.js"></script>
        <!--        <div id="container"></div> -->
        <script>
        var camera, scene, renderer;
        var cwidth = 175;
        var cheight = 175;
        var cameraControls, effectController;
        var clock = new THREE.Clock();
        var gridX = true;
        var gridY = false;
        var gridZ = false;
        var axes = true;
        var ground = true;
        var arm, forearm;
        var curve;
        //nothing
        function fillScene() {
            scene = new THREE.Scene();
            //scene.fog = new THREE.Fog(0xFFFFFF, 2000, 4000);

            // LIGHTS
            var ambientLight = new THREE.AmbientLight(0x8c8c8c);

            var light = new THREE.DirectionalLight(0xFFFFFF, .8);
            light.position.set(200, 200, 500);

            var light3 = new THREE.DirectionalLight(0xFFFFFF, .8);
            light.position.set(200, -4200, 500);

            var light2 = new THREE.DirectionalLight(0xFFFFFF, .5);
            light2.position.set(-100, 250, -200);

            scene.add(ambientLight);
            scene.add(light);
            scene.add(light2);
            scene.add(light3);



            var robotBaseMaterial = new THREE.MeshPhongMaterial({
                color: 0x6E23BB,
                specular: 0x6E23BB,
                shininess: 20
            });
            var robotForearmMaterial = new THREE.MeshPhongMaterial({
                color: 0xF4C154,
                specular: 0xF4C154,
                shininess: 100
            });
            var robotUpperArmMaterial = new THREE.MeshPhongMaterial({
                color: 0x95E4FB,
                specular: 0x95E4FB,
                shininess: 100
            });
            var ocureMaterial = new THREE.MeshPhongMaterial({
                color: 0xFFFFFF,
                specular: 0xFFFFFF,
                shininess: 10
            });



            //scene.add(arm);
        }

        function loadStlTeeth() {
            var oStlLoader = new THREE.STLLoader();
            oStlLoader.load('models/Teeth 2.stl', function(geometry) {
                var material = new THREE.MeshPhongMaterial({
                    transparent: true,
                    opacity: 1,
                    color: 0xFFFFFF,
                    specular: 0x6E23BB,
                    shininess: 20
                });


                //geometry.computeVertexNormals();


                var mesh = new THREE.Mesh(geometry, material);
                mesh.position.y = 50;
                //mesh.rotate.x = 90 * Math.PI / 180;
                scene.add(mesh);
            });
        }

        function loadStlBrackets() {
            var oStlLoader = new THREE.STLLoader();
            oStlLoader.load('models/Brackets.stl', function(geometry) {
                var material = new THREE.MeshPhongMaterial({
                    transparent: true,
                    opacity: 1.0,
                    color: 0xFFFFFF,
                    specular: 0xFFFFFF,
                    shininess: 10
                });
                var mesh = new THREE.Mesh(geometry, material);
                mesh.position.y = 50;
                //mesh.rotate.x = 90 * Math.PI / 180;
                scene.add(mesh);
            });
        }

        function loadStlMounds() {
            var oStlLoader = new THREE.STLLoader();
            oStlLoader.load('models/Mounds.stl', function(geometry) {
                var material = new THREE.MeshPhongMaterial({
                    transparent: true,
                    opacity: 1,
                    color: 0x99ebff,
                    specular: 0xFFFFFF,
                    shininess: 10,
                });


                //geometry.computeVertexNormals();


                var mesh = new THREE.Mesh(geometry, material);
                mesh.position.y = 50;
                //mesh.rotate.x = 90 * Math.PI / 180;
                scene.add(mesh);
            });
        }




        function createRobotExtender(part, length, material) {

            var cylinder = new THREE.Mesh(
                new THREE.CylinderGeometry(22, 22, 6, 32), material);
            part.add(cylinder);

            var i;
            for (i = 0; i < 4; i++) {
                var box = new THREE.Mesh(
                    new THREE.BoxGeometry(4, length, 4), material);
                box.position.x = (i < 2) ? -8 : 8;
                box.position.y = length / 2;
                box.position.z = (i % 2) ? -8 : 8;
                part.add(box);
            }

            cylinder = new THREE.Mesh(
                new THREE.CylinderGeometry(15, 15, 40, 32), material);
            cylinder.rotation.x = 90 * Math.PI / 180;
            cylinder.position.y = length;
            //part.add(cylinder);
        }

        function createRobotCrane(part, length, material) {
            var box = new THREE.Mesh(
                new THREE.BoxGeometry(18, length, 18), material);
            box.position.y = length / 2;
            part.add(box);

            var sphere = new THREE.Mesh(
                new THREE.SphereGeometry(20, 32, 16), material);
            // place sphere at end of arm
            sphere.position.y = length;
            //part.add(sphere);
        }



        function init() {
            var canvasWidth = cwidth;
            var canvasHeight = cheight;
            var canvasRatio = canvasWidth / canvasHeight;

            // RENDERER
            renderer = new THREE.WebGLRenderer({
                alpha: true,
                antialias: true
            });
            renderer.gammaInput = true;
            renderer.gammaOutput = true;
            renderer.setSize(canvasWidth, canvasHeight);
            renderer.setClearColor(0x000000, 0);

            var h5 = document.getElementById('h5');
            var container = document.getElementById('container');
            container.insertBefore(renderer.domElement, h5);

            // CAMERA
            //camera = new THREE.PerspecitiveCamera(30, canvasRatio, 1, 1000);
            var viewSize = 50;
            camera = new THREE.OrthographicCamera((-canvasRatio * viewSize / 2), (canvasRatio * viewSize / 2), viewSize / 2, -viewSize / 2, 1, 1000);
            camera.position.set(0, 0, 100);
            // CONTROLS
            cameraControls = new THREE.OrbitControls(camera, renderer.domElement);
            cameraControls.target.set(0, 0, 0);

            fillScene();

        }

        function animate() {
            window.requestAnimationFrame(animate);
            render();
        }

        function render() {
            if (document.documentElement.clientWidth < 450) {
                cwidth = 175;
                cheight = 175;
                renderer.gammaInput = true;
                renderer.gammaOutput = true;
                renderer.setSize(cwidth, cheight);
                renderer.setClearColor(0x000000, 0);

                var container = document.getElementById('container');
                var h5 = document.getElementById('h5');
                var child = document.getElementsByTagName('CANVAS');
                container.removeChild(child[0]);
                container.insertBefore(renderer.domElement, h5);
            }
            if (document.documentElement.clientWidth > 450) {
                cwidth = 200;
                cheight = 200;
                renderer.gammaInput = true;
                renderer.gammaOutput = true;
                renderer.setSize(cwidth, cheight);
                renderer.setClearColor(0x000000, 0);

                var container = document.getElementById('container');
                var h5 = document.getElementById('h5');
                var child = document.getElementsByTagName('CANVAS');
                container.removeChild(child[0]);
                container.insertBefore(renderer.domElement, h5);
            }

            if (document.documentElement.clientWidth > 550) {
                cwidth = 225;
                cheight = 225;
                renderer.gammaInput = true;
                renderer.gammaOutput = true;
                renderer.setSize(cwidth, cheight);
                renderer.setClearColor(0x000000, 0);

                var container = document.getElementById('container');
                var h5 = document.getElementById('h5');
                var child = document.getElementsByTagName('CANVAS');
                container.removeChild(child[0]);
                container.insertBefore(renderer.domElement, h5);
            }
            if (document.documentElement.clientWidth > 650) {
                cwidth = 235;
                cheight = 235;
                renderer.gammaInput = true;
                renderer.gammaOutput = true;
                renderer.setSize(cwidth, cheight);
                renderer.setClearColor(0x000000, 0);

                var container = document.getElementById('container');
                var h5 = document.getElementById('h5');
                var child = document.getElementsByTagName('CANVAS');
                container.removeChild(child[0]);
                container.insertBefore(renderer.domElement, h5);
            }
            if (document.documentElement.clientWidth > 768) {
                cwidth = 500;
                cheight = 500;
                renderer.gammaInput = true;
                renderer.gammaOutput = true;
                renderer.setSize(cwidth, cheight);
                renderer.setClearColor(0x000000, 0);

                var container = document.getElementById('container');
                var h5 = document.getElementById('h5');
                var child = document.getElementsByTagName('CANVAS');
                container.removeChild(child[0]);
                container.insertBefore(renderer.domElement, h5);
            }
            var delta = clock.getDelta();
            //renderer.setViewport();
            cameraControls.update(delta);
            cameraControls.noZoom = true;
            renderer.render(scene, camera);
        }

        function setupGui() {

        }

        function takeScreenshot() {
            effectController.newGround = true;
            effectController.newGridX = false;
            effectController.newGridY = false;
            effectController.newGridZ = false;
            effectController.newAxes = false;
            init();
            render();
            var img1 = renderer.domElement.toDataURL("image/png");
            camera.position.set(400, 500, -800);
            render();
            var img2 = renderer.domElement.toDataURL("image/png");
            var imgTarget = window.open('', 'For grading script');
            imgTarget.document.write('<img src="' + img1 + '"/><img src="' + img2 + '"/>');
        }

        function saveSTL(scene, name) {
            var exporter = new THREE.STLExporter();
            var stlString = exporter.parse(scene);

            var blob = new Blob([stlString], {
                type: 'text/plain'
            });

            saveAs(blob, name + '.stl');
        }
        /*window.addEventListener('resize', function() {
            //camera.aspect = window.innerWidth / (window.innerHeight / 10000);
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight / 3);

        });*/



        init();
        setupGui();
        loadStlTeeth();
        loadStlBrackets();
        loadStlMounds();
        animate();
        //
        </script>
</body>

</html>